# Документ требований - Сайт бара (MVP)

## Введение

Система представляет собой веб-приложение для бара, которое заменит устаревший сайт и платное меню на планшетах. Приложение должно работать на компьютерах, телефонах и планшетах посетителей, а также на планшетах внутри бара. Ключевая особенность - возможность работы без интернета внутри бара через локальный сервер.

MVP версия включает: отображение меню с фотографиями, корзину заказов, отправку заказов на планшет бара, бронирование столов и админ-панель для управления контентом.

## Глоссарий

- **Система** - веб-приложение бара (фронтенд + бэкенд + база данных)
- **Посетитель** - гость бара, использующий сайт для просмотра меню и заказов
- **Администратор** - сотрудник бара, управляющий контентом через админ-панель
- **Планшет бара** - Android планшет на барной стойке для получения заказов и бронирований
- **Позиция меню** - блюдо или напиток в меню с названием, ценой, фото и описанием
- **Модальное окно** - всплывающее окно с детальной информацией о позиции меню
- **Корзина** - временное хранилище выбранных позиций перед оформлением заказа
- **Заказ** - список позиций с количеством, отправленный посетителем в бар
- **Бронирование** - заявка на резервирование стола на определенную дату и время
- **Локальный сервер** - сервер внутри бара для работы системы без интернета
- **PWA** - Progressive Web App, технология для офлайн-работы приложения

## Требования

### Требование 1

**User Story:** Как посетитель, я хочу видеть меню бара на своем устройстве, чтобы выбрать блюда и напитки

#### Критерии приемки

1. WHEN Посетитель открывает главную страницу, THE Система SHALL отобразить навигацию с разделами и кнопку "Меню"
2. WHEN Посетитель нажимает на кнопку "Меню", THE Система SHALL отобразить единую страницу со всеми разделами меню (десерты, закуски и т.д.)
3. WHILE Посетитель просматривает меню на телефоне, THE Система SHALL отображать позиции в одну или две колонки
4. WHILE Посетитель просматривает меню на компьютере, THE Система SHALL отображать позиции в три или четыре колонки
5. THE Система SHALL отображать каждую позицию меню с фотографией, названием и ценой

### Требование 2

**User Story:** Как посетитель, я хочу видеть детальную информацию о блюде, чтобы принять решение о заказе

#### Критерии приемки

1. WHEN Посетитель нажимает на позицию меню, THE Система SHALL открыть модальное окно с детальной информацией
2. THE Система SHALL отображать в модальном окне название, фотографию, описание, калорийность и цену позиции
3. WHEN Посетитель нажимает на фотографию в модальном окне, THE Система SHALL увеличить фотографию для детального просмотра
4. WHEN Посетитель нажимает вне модального окна или на кнопку закрытия, THE Система SHALL закрыть модальное окно

### Требование 3

**User Story:** Как посетитель, я хочу добавлять блюда в корзину и оформлять заказ, чтобы получить еду и напитки

#### Критерии приемки

1. WHEN Посетитель нажимает кнопку "Добавить в корзину" в модальном окне, THE Система SHALL добавить позицию в корзину с количеством 1
2. WHERE позиция имеет варианты объема (250г, 500г, 1000г), THE Система SHALL предложить выбрать объем перед добавлением в корзину
3. WHEN Посетитель открывает корзину, THE Система SHALL отобразить список выбранных позиций с названиями, объемами, ценами и общей суммой
4. WHEN Посетитель изменяет количество позиции в корзине, THE Система SHALL пересчитать общую сумму заказа
5. WHEN Посетитель нажимает "Оформить заказ" в корзине, THE Система SHALL отправить заказ на планшет бара и показать подтверждение

### Требование 4

**User Story:** Как администратор, я хочу получать заказы на планшет бара, чтобы обработать их

#### Критерии приемки

1. WHEN Посетитель оформляет заказ, THE Система SHALL сохранить заказ в базе данных со статусом "новый"
2. WHEN Посетитель оформляет заказ, THE Система SHALL отправить уведомление на планшет бара в течение 3 секунд
3. WHEN Администратор открывает список заказов на планшете, THE Система SHALL отобразить все новые заказы с временем создания
4. WHEN Администратор нажимает на заказ, THE Система SHALL отобразить детали заказа (позиции, количество, цены)
5. WHEN Администратор изменяет статус заказа на "выполнен", THE Система SHALL обновить статус в базе данных

### Требование 5

**User Story:** Как посетитель, я хочу забронировать стол, чтобы гарантировать себе место в баре

#### Критерии приемки

1. WHEN Посетитель открывает раздел "Бронирование", THE Система SHALL отобразить схему расположения столов (17 столов)
2. WHEN Посетитель нажимает на стол на схеме, THE Система SHALL показать фотографию этого стола
3. WHEN Посетитель нажимает "Забронировать" для выбранного стола, THE Система SHALL открыть форму с полями: дата, время, имя, телефон, количество человек
4. WHEN Посетитель отправляет форму бронирования, THE Система SHALL сохранить бронирование в базе данных и отправить уведомление на планшет бара
5. WHEN Администратор получает бронирование на планшет, THE Система SHALL отобразить детали бронирования для подтверждения звонком

### Требование 6

**User Story:** Как администратор, я хочу управлять позициями меню через админ-панель, чтобы быстро обновлять контент

#### Критерии приемки

1. WHEN Администратор открывает админ-панель, THE Система SHALL запросить логин и пароль для входа
2. WHEN Администратор вводит корректные учетные данные, THE Система SHALL предоставить доступ к админ-панели
3. WHEN Администратор открывает раздел управления меню, THE Система SHALL отобразить список всех позиций с возможностью редактирования
4. WHEN Администратор создает новую позицию меню, THE Система SHALL запросить название, цену, вес, описание, калорийность, раздел и фотографию
5. WHEN Администратор загружает фотографию, THE Система SHALL принять форматы JPG, WEBP и JFIF

### Требование 7

**User Story:** Как администратор, я хочу обрабатывать фотографии на сайте, чтобы не использовать внешние редакторы

#### Критерии приемки

1. WHEN Администратор загружает фотографию с неправильным соотношением сторон, THE Система SHALL предложить инструмент кадрирования
2. WHEN Администратор использует инструмент кадрирования, THE Система SHALL позволить выбрать область изображения для обрезки
3. WHEN Администратор сохраняет обрезанную фотографию, THE Система SHALL сохранить изображение с одинаковым соотношением сторон для всех позиций меню
4. THE Система SHALL отображать все фотографии меню с одинаковым размером на странице меню

### Требование 8

**User Story:** Как администратор, я хочу массово загружать позиции меню из файла, чтобы сэкономить время

#### Критерии приемки

1. WHEN Администратор выбирает функцию импорта в админ-панели, THE Система SHALL предложить загрузить CSV файл
2. THE Система SHALL принимать CSV файл с колонками: название, цена, вес, описание, калорийность, раздел, путь к фото
3. WHEN Администратор загружает корректный CSV файл, THE Система SHALL создать или обновить позиции меню из файла
4. IF CSV файл содержит ошибки, THEN THE Система SHALL отобразить список ошибок с номерами строк

### Требование 9

**User Story:** Как администратор, я хочу скрывать позиции меню в определенное время, чтобы показывать актуальное меню

#### Критерии приемки

1. WHEN Администратор редактирует позицию меню, THE Система SHALL позволить указать время начала и окончания доступности
2. WHEN Посетитель запрашивает меню, THE Система SHALL проверить текущее время и скрыть недоступные позиции
3. WHEN Администратор отключает позицию меню, THE Система SHALL немедленно скрыть её для посетителей
4. WHEN Администратор включает позицию меню, THE Система SHALL немедленно показать её посетителям

### Требование 10

**User Story:** Как посетитель внутри бара, я хочу пользоваться сайтом без интернета, чтобы делать заказы при любых условиях

#### Критерии приемки

1. WHEN интернет-соединение отсутствует внутри бара, THE Система SHALL продолжать работать через локальный сервер
2. WHEN Посетитель открывает сайт на устройстве внутри бара, THE Система SHALL подключиться к локальному серверу автоматически
3. WHEN Посетитель делает заказ без интернета, THE Система SHALL сохранить заказ на локальном сервере и доставить на планшет бара
4. THE Система SHALL кэшировать меню, фотографии и интерфейс для работы в офлайн-режиме

### Требование 11

**User Story:** Как посетитель, я хочу переключать тему оформления сайта, чтобы использовать удобный для меня вид

#### Критерии приемки

1. THE Система SHALL отображать сайт в светлой теме по умолчанию
2. WHEN Посетитель нажимает переключатель темы, THE Система SHALL изменить оформление на темную тему
3. WHEN Посетитель переключает тему, THE Система SHALL сохранить выбор в браузере для следующих посещений
4. THE Система SHALL применять выбранную тему ко всем страницам и компонентам

### Требование 12

**User Story:** Как администратор, я хочу управлять афишей и акциями, чтобы информировать посетителей о событиях

#### Критерии приемки

1. WHEN Администратор создает событие в афише, THE Система SHALL запросить название, описание, дату и время события
2. WHEN Посетитель открывает главную страницу, THE Система SHALL отобразить афишу с ближайшими событиями
3. WHEN Администратор создает акцию, THE Система SHALL запросить название, описание, цену и срок действия
4. WHEN Посетитель открывает главную страницу, THE Система SHALL выделить активные акции отдельным цветом или блоком
